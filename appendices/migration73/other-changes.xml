<?xml version="1.0" encoding="utf-8"?>
<!-- $Revision$ -->
<!-- EN-Revision: 97c4cc92207255ea09308d2646441dd61448d924 Maintainer: avenger Status: partial -->
<!-- CREDITS: mowangjuanzi, Luffy -->
<sect1 xml:id="migration73.other-changes" xmlns:xlink="http://www.w3.org/1999/xlink">
 <title>其它变更</title>

 <sect2 xml:id="migration73.other-changes.core">
  <title>PHP 核心</title>

  <sect3 xml:id="migration73.other-changes.core.setcookie">
   <title>Set(raw)cookie 函数接受 $option 数组参数</title>

   <para>
    <function>setcookie</function> 和 <function>setrawcookie</function> 现在还支持以下签名：
    <methodsynopsis>
     <type>bool</type><methodname>setcookie</methodname>
     <methodparam><type>string</type><parameter>name</parameter></methodparam>
     <methodparam choice="opt"><type>string</type><parameter>value</parameter><initializer>""</initializer></methodparam>
     <methodparam choice="opt"><type>array</type><parameter>options</parameter><initializer>[]</initializer></methodparam>
    </methodsynopsis>
    <literal>$options</literal> 是关联数组，可以存在以下任意 key
    <literal>"expires"</literal>、<literal>"path"</literal>、<literal>"domain"</literal>、<literal>"secure"</literal>、<literal>"httponly"</literal>
    和 <literal>"samesite"</literal>。
   </para>
  </sect3>

  <sect3 xml:id="migration73.other-changes.core.syslog">
   <title>新的 Syslog ini 配置</title>

   <para>
    如果 <link linkend="ini.error-log">error_log</link> 设置为
    <literal>syslog</literal>，则新增以下 ini 指令来自定义日志记录：
    <variablelist>
     <varlistentry>
      <term><link linkend="ini.syslog.facility">syslog.facility</link></term>
      <listitem>
       <simpara>
        指定记录消息的程序类型。
       </simpara>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><link linkend="ini.syslog.filter">syslog.filter</link></term>
      <listitem>
       <simpara>
        指定过滤纪录消息的过滤器类型，支持的过滤器类型——<literal>all</literal>、<literal>no-ctrl</literal>
        和 <literal>ascii</literal>。自 PHP 7.3.8 起，<literal>raw</literal>
        也可以使用，恢复了 syslog 在之前 PHP 版本中的行为方式。此过滤器还会影响
        <function>syslog</function> 的调用，
       </simpara>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><link linkend="ini.syslog.ident">syslog.ident</link></term>
      <listitem>
       <simpara>
        指定在每条消息前面添加的标识符（ident）字符串。
       </simpara>
      </listitem>
     </varlistentry>
    </variablelist>
   </para>
  </sect3>

  <sect3 xml:id="migration73.other-changes.core.gc">
   <title>垃圾回收机制</title>

   <para>
    <link linkend="features.gc.collecting-cycles">循环 GC</link>
    已增强，这可能会带来相当大的性能改进。
   </para>
  </sect3>

  <sect3 xml:id="migration73.other-changes.core.misc">
   <title>其它</title>

   <para>
    <function>var_export</function> 现在导出 <classname>stdClass</classname>
    为数组转换为对象（<code>(object) array( ... )</code>），而不是使用不存在的方法
    <methodname>stdClass::__setState</methodname>。
   </para>

   <para>
    <function>debug_zval_dump</function> 已变更为跟 <function>var_dump</function>
    一样的方式显示递归数组和对象。现在，不会重复展示两次了。
   </para>

   <para>
    <function>array_push</function> 和 <function>array_unshift</function> 现在也可以使用单个参数调用，这对于展开运算符来说尤其方便。
   </para>
  </sect3>

 </sect2>

 <sect2 xml:id="migration73.other-changes.phpdbg">
  <title>交互式 PHP 调试程序</title>

  <para>
   已移除未使用的常量 <constant>PHPDBG_FILE</constant>、<constant>PHPDBG_METHOD</constant>、<constant>PHPDBG_LINENO</constant>
   和 <constant>PHPDBG_FUNC</constant>。
  </para>
 </sect2>

 <sect2 xml:id="migration73.other-changes.fpm">
  <title>FastCGI 进程管理器</title>

  <para>
   <function>getallheaders</function> 函数现已可用。
  </para>
 </sect2>

 <sect2 xml:id="migration73.other-changes.curl">
  <title>客户端 URL 库</title>

  <para>
   现在需要 libcurl ≥ 7.15.5。
  </para>
 </sect2>

 <sect2 xml:id="migration73.other-changes.filter">
  <title>数据过滤</title>

  <para>
   <constant>FILTER_VALIDATE_FLOAT</constant> now also supports a <literal>thousand</literal>
   option, which defines the set of allowed thousand separator chars.  The default
   (<code>"',."</code>) is fully backward compatible with former PHP versions.
  </para>

  <para>
   <constant>FILTER_SANITIZE_ADD_SLASHES</constant> has been added as an alias of the
   <literal>magic_quotes</literal> filter (<constant>FILTER_SANITIZE_MAGIC_QUOTES</constant>).
   The <literal>magic_quotes</literal> filter is subject to removal in future versions of PHP.
  </para>
 </sect2>

 <sect2 xml:id="migration73.other-changes.ftp">
  <title>FTP</title>

  <para>
   The default transfer mode has been changed to <literal>binary</literal>.
  </para>
 </sect2>

 <sect2 xml:id="migration73.other-changes.intl">
  <title>国际化相关函数</title>

  <para>
   <constant>Normalizer::NONE</constant> is deprecated, when PHP is linked with
   ICU ≥ 56.
  </para>

  <para>
   Introduced <constant>Normalizer::FORM_KC_CF</constant> as
   <methodname>Normalizer::normalize</methodname> argument for
   <literal>NFKC_Casefold</literal> normalization; available when linked with
   ICU ≥ 56.
  </para>
 </sect2>

 <sect2 xml:id="migration73.other-changes.json">
  <title>JavaScript Object Notation</title>

  <para>
   A new flag has been added, <constant>JSON_THROW_ON_ERROR</constant>, which
   can be used with <function>json_decode</function> or
   <function>json_encode</function> and causes these functions to throw the new
   <classname>JsonException</classname> upon an error, instead of setting the
   global error state that is retrieved with
   <function>json_last_error</function> and <function>json_last_error_msg</function>.
   <constant>JSON_PARTIAL_OUTPUT_ON_ERROR</constant> takes precedence over
   <constant>JSON_THROW_ON_ERROR</constant>.
  </para>
 </sect2>

 <sect2 xml:id="migration73.other-changes.mbstring">
  <title>Multibyte String</title>

  <para>
   The configuration option <option role="configure">--with-libmbfl</option> is
   no longer available.
  </para>
 </sect2>

 <sect2 xml:id="migration73.other-changes.uodbc">
  <title>ODBC (Unified)</title>

  <para>
   Support for <literal>ODBCRouter</literal> and <literal>Birdstep</literal>
   including the <literal>birdstep.max_links</literal> ini directive has been
   removed.
  </para>
 </sect2>

 <sect2 xml:id="migration73.other-changes.opcache">
  <title>OPcache</title>

  <para>
   The <literal>opcache.inherited_hack</literal> ini directive has been removed.
   The value has already been ignored since PHP 5.3.0.
  </para>
 </sect2>

 <sect2 xml:id="migration73.other-changes.openssl">
  <title>OpenSSL</title>

  <para>
   The <literal>min_proto_version</literal> and <literal>max_proto_version</literal>
   ssl stream options as well as related constants for possible TLS protocol values
   have been added.
  </para>
 </sect2>

 <sect2 xml:id="migration73.other-changes.pcre">
  <title>Regular Expressions (Perl-Compatible)</title>

  <para>
   The <link linkend="book.pcre">PCRE extension</link> has been upgraded to
   PCRE2, which may cause minor behavioral changes (for instance, character
   ranges in classes are now more strictly interpreted), and augments the
   existing regular expression syntax.
  </para>

  <para>
   <function>preg_quote</function> now also escapes the <literal>'#'</literal>
   character.
  </para>
 </sect2>

 <sect2 xml:id="migration73.other-changes.pdo-dblib">
  <title>Microsoft SQL Server and Sybase Functions (PDO_DBLIB)</title>

  <para>
   The attribute <constant>PDO::DBLIB_ATTR_SKIP_EMPTY_ROWSETS</constant> to enable automatic
   skipping of empty rowsets has been added.
  </para>

  <para>
   The <constant>PDO::DBLIB_ATTR_TDS_VERSION</constant> attribute which exposes
   the TDS version has been added.
  </para>

  <para>
    DATETIME2 columns are now treated like DATETIME columns.
  </para>
 </sect2>

 <sect2 xml:id="migration73.other-changes.pdo-sqlite">
  <title>SQLite Functions (PDO_SQLITE)</title>

  <para>
   SQLite3 databases can now be opened in read-only mode by setting the
   new <constant>PDO::SQLITE_ATTR_OPEN_FLAGS</constant> attribute to
   <constant>PDO::SQLITE_OPEN_READONLY</constant>.
  </para>
 </sect2>

 <sect2 xml:id="migration73.other-changes.session">
  <title>Session Handling</title>

  <para>
   <function>session_set_cookie_params</function> now also supports the
   following signature:
   <methodsynopsis>
    <type>bool</type><methodname>session_set_cookie_params</methodname>
    <methodparam><type>array</type><parameter>options</parameter></methodparam>
   </methodsynopsis>
   where <literal>$options</literal> is an associative array which may have
   any of the keys <literal>"lifetime"</literal>, <literal>"path"</literal>,
   <literal>"domain"</literal>, <literal>"secure"</literal>,
   <literal>"httponly"</literal> and <literal>"samesite"</literal>. Accordingly,
   the return value of <function>session_get_cookie_params</function> now also
   has an element with the key <literal>"samesite"</literal>.
   Furthermore, the new <literal>session.cookie_samesite</literal> ini option to
   set the default of the SameSite directive for cookies has been added. It
   defaults to <literal>""</literal> (empty string), so no SameSite directive is
   set. Can be set to <literal>"Lax"</literal> or <literal>"Strict"</literal>,
   which sets the respective SameSite directive.
  </para>
 </sect2>

 <sect2 xml:id="migration73.other-changes.tidy">
  <title>Tidy</title>

  <para>
   Building against <link xlink:href="&url.tidyp;">tidyp</link> is now also
   supported transparently. Since tidyp offers no API to get the release date,
   <function>tidy_get_release</function> and <methodname>tidy::getRelease</methodname>
   return <literal>'unknown'</literal> in this case.
  </para>
 </sect2>

 <sect2 xml:id="migration73.other-changes.xml">
  <title>XML 解析器</title>

  <para>
   如果扩展是针对 libxml 编译，则不再忽略 <function>xml_set_external_entity_ref_handler</function>
   回调的返回值。以前，会忽略返回值，并且不会停止解析。
  </para>
 </sect2>

 <sect2 xml:id="migration73.other-changes.zip">
  <title>Zip</title>

  <para>
   不建议针对捆绑的 libzip 进行编译，但通过在配置中添加 <option role="configure">--without-libzip</option> 仍然可以实现。
  </para>
 </sect2>

 <sect2 xml:id="migration73.other-changes.zlib">
  <title>Zlib 压缩</title>

  <para>
   <link linkend="wrappers.compression">compress.zlib 包装器</link>添加了 zlib/level
   上下文选项，以方便设置所需的压缩级别。
  </para>
 </sect2>

</sect1>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"~/.phpdoc/manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->
